<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings - ESP8266 Configuration Portal</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="settings.css">
</head>
<body class="dark-mode">
    <div class="app-container">
        <header class="app-header">
            <div class="header-content">
                <h1 class="app-title">ESP8266 Configuration Portal</h1>
            </div>
        </header>

        <nav class="main-nav">
            <div class="nav-container">
                <a href="/" class="nav-item" data-tab="wifi">
                    <span class="nav-icon">üì∂</span>
                    <span class="nav-text">WiFi Configuration</span>
                </a>
                <a href="/slaves.html" class="nav-item" data-tab="slaves">
                    <span class="nav-icon">üîß</span>
                    <span class="nav-text">Modbus Slaves</span>
                </a>
                <a href="/settings.html" class="nav-item active" data-tab="settings">
                    <span class="nav-icon">‚öôÔ∏è</span>
                    <span class="nav-text">Settings</span>
                </a>
                <a href="/debug.html" class="nav-item" data-tab="debug">
                    <span class="nav-icon">üêõ</span>
                    <span class="nav-text">Debug</span>
                </a>
            </div>
        </nav>

        <main class="main-content">
            <div class="content-header">
                <h2>Slave Configuration Editor</h2>
                <p class="content-description">Search for slave configurations and edit them directly</p>
            </div>

            <div class="status-message" id="status" aria-live="polite"></div>

            <div class="configuration-layout">
                <section class="config-panel" aria-labelledby="search-heading">
                    <header class="panel-header">
                        <h3 id="search-heading" class="panel-title">
                            <span class="panel-icon">üîç</span>
                            Search Slave Configuration
                        </h3>
                    </header>

                    <form class="search-form" id="searchForm">
                        <div class="form-row">
                            <div class="input-group compact">
                                <label for="search_slave_id" class="input-label">Slave ID</label>
                                <input type="number" 
                                       id="search_slave_id" 
                                       class="text-input"
                                       placeholder="1"
                                       min="1" 
                                       max="247"
                                       required>
                            </div>

                            <div class="input-group compact">
                                <label for="search_slave_name" class="input-label">Slave Name</label>
                                <input type="text" 
                                       id="search_slave_name" 
                                       class="text-input"
                                       placeholder="Temperature Sensor 1"
                                       required>
                            </div>
                        </div>

                        <div class="action-bar compact">
                            <button type="button" class="btn btn-primary" onclick="searchSlaveConfig()">
                                <span class="btn-icon">üîç</span>
                                Search Configuration
                            </button>
                        </div>
                    </form>
                </section>

                <section class="config-panel" aria-labelledby="edit-heading" id="editSection" style="display: none;">
                    <header class="panel-header">
                        <h3 id="edit-heading" class="panel-title">
                            <span class="panel-icon">‚úèÔ∏è</span>
                            Edit Slave Configuration
                        </h3>
                    </header>

                    <div class="input-group">
                        <label for="config_editor" class="input-label">Configuration JSON</label>
                        <textarea 
                            id="config_editor" 
                            class="text-input"
                            rows="15"
                            placeholder="Slave configuration will appear here..."
                            style="font-family: monospace; resize: vertical; min-height: 300px;"
                        ></textarea>
                    </div>

                    <div class="action-bar compact">
                        <button type="button" class="btn btn-secondary" onclick="cancelEdit()">
                            <span class="btn-icon">‚ùå</span>
                            Cancel
                        </button>
                        <button type="button" class="btn btn-primary" onclick="saveEditedConfig()">
                            <span class="btn-icon">üíæ</span>
                            Save Changes
                        </button>
                    </div>
                </section>
            </div>

            <!-- Info Panel -->
            <section class="config-panel" aria-labelledby="info-heading">
                <header class="panel-header">
                    <h3 id="info-heading" class="panel-title">
                        <span class="panel-icon">‚ÑπÔ∏è</span>
                        How to Use
                    </h3>
                </header>
                
                <div class="section-description">
                    <p><strong>Step 1:</strong> Enter the Slave ID and Slave Name exactly as configured</p>
                    <p><strong>Step 2:</strong> Click "Search Configuration" to load the slave data</p>
                    <p><strong>Step 3:</strong> Edit the JSON configuration in the text area</p>
                    <p><strong>Step 4:</strong> Click "Save Changes" to update the configuration</p>
                    <p><strong>Note:</strong> The configuration will be validated before saving</p>
                </div>
            </section>
        </main>

        <footer class="app-footer">
            <div class="footer-content">
                <!-- Empty footer as requested -->
            </div>
        </footer>
    </div>

    <script src="settings.js"></script>
</body>
</html>